<article class="movie-card">
  <figure class="movie-card__figure">
    <!-- 1. Если у фильма нет постера (poster_path === null) -->
    @if (!movie.poster_path) {
      <div class="movie-card__no-poster">
        <span>Нет постера</span>
      </div>
    }

    <!-- 2. Если постер есть, но он еще загружается -->
    @if (movie.poster_path && !imageLoaded()) {
      <div class="movie-card__placeholder"></div>
    }

    <!-- 3. Изображение (рендерится только если есть путь) -->
    @if (movie.poster_path) {
      <img
        class="movie-card__poster"
        [src]="movie.poster_path | tmdbImage:'w300'"
        [alt]="'Постер ' + movie.title"
        [class.movie-card__poster--loaded]="imageLoaded()"
        (load)="onImageLoad()"
        loading="lazy"
      >
    }

    <!-- Отображаем плашку с рейтингом -->
    @if (movie.vote_average > 0) {
      <div class="movie-card__rating">
        ★ {{ movie.vote_average | number: '1.1-1' }}
      </div>
    }
  </figure>
  <div class="movie-card__info">
    <h3 class="movie-card__title">{{ movie.title }}</h3>
    <p class="movie-card__year">{{ movie.release_date | date: 'yyyy' }}</p>
    <!-- Отображаем жанры -->
    @if (movie.genreNames.length) {
      <div class="movie-card__genres">
        @for (genre of movie.genreNames; track genre) {
          <span class="movie-card__genre-tag">{{ genre }}</span>
        }
      </div>
    }
  </div>
</article>
