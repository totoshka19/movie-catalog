<!-- ИЗМЕНЕНИЕ: Добавлен оверлей для закрытия по клику вне сайдбара -->
@if (isOpen) {
  <div class="sidebar-overlay" (click)="onClose()"></div>
}

<!-- ИЗМЕНЕНИЕ: Добавлена привязка класса is-open -->
<aside class="sidebar" [class.is-open]="isOpen">
  <!-- Блок для поиска, который будет виден на малых экранах -->
  <div class="sidebar__search">
    <app-search-bar
      [initialQuery]="initialQuery"
      placeholder="Поиск..."
      (searchChange)="onSearchChange($event)"
    ></app-search-bar>
  </div>

  <div class="sidebar__section">
    <div class="sidebar__header">
      <h3>
        Жанры
        @if (selectedGenres.length) {
          <span class="sidebar__genre-count">{{ selectedGenres.length }}</span>
        }
      </h3>
      @if (selectedGenres.length) {
        <button class="sidebar__reset-btn" (click)="resetGenres()">Сбросить</button>
      }
    </div>

    <div class="sidebar__genres-container">
      <div class="genres-list">
        @for (genre of genres; track genre.id) {
          <label class="checkbox-label">
            <input
              type="checkbox"
              [checked]="isSelected(genre.id)"
              (change)="onGenreToggle($event, genre.id)"
            >
            <span class="checkbox-custom"></span>
            <span class="checkbox-text">{{ genre.name }}</span>
          </label>
        }
      </div>
    </div>
  </div>
</aside>
